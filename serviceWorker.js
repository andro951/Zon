"use strict";

const zonDebug = true;//DONT FORGET TO RUN ZonTextureManifestGenerator BEFORE PUBLISHING!!!!!!
const isWorkerContext = typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope;

const CACHE_NAME = 'zon-game-cache-v0.0.7';
console.log(`CACHE version: ${CACHE_NAME} (${isWorkerContext ? 'Service Worker' : 'Game'}, ${zonDebug ? 'Debug' : 'Release'})`);

//ASSETS Start
const ASSETS = [
	'./',
	'./index.html',
	'./registerServiceWorker.js',
	'./serviceWorker.js',
	'./~WRL0005.tmp',
	'./assets/css/style.css',
	'./assets/js/built/device.js',
	'./assets/js/built/game.js',
	'./assets/js/built/settings.js',
	'./assets/js/built/abilities/ability.js',
	'./assets/js/built/abilities/abilityController.js',
	'./assets/js/built/abilities/basicAttack.js',
	'./assets/js/built/abilities/focus.js',
	'./assets/js/built/audio/music/musicManager.js',
	'./assets/js/built/balls/ball.js',
	'./assets/js/built/balls/ballManager.js',
	'./assets/js/built/blocks/block.js',
	'./assets/js/built/blocks/blocksManager.js',
	'./assets/js/built/cores/coreManager.js',
	'./assets/js/built/cores/effects/aetherGained.js',
	'./assets/js/built/cores/effects/aetherNodePower.js',
	'./assets/js/built/cores/effects/creationPower.js',
	'./assets/js/built/cores/talents/talentManager.js',
	'./assets/js/built/crafting/blueprint.js',
	'./assets/js/built/crafting/craftingManager.js',
	'./assets/js/built/crafting/craftingTaskManager.js',
	'./assets/js/built/crafting/Item/item.js',
	'./assets/js/built/crafting/Item/itemID.js',
	'./assets/js/built/gameFlow/gameManager.js',
	'./assets/js/built/gameFlow/levelData.js',
	'./assets/js/built/gameFlow/processManager.js',
	'./assets/js/built/gameFlow/setup.js',
	'./assets/js/built/gameFlow/setupManager.js',
	'./assets/js/built/gameFlow/stageSmartReset.js',
	'./assets/js/built/gameFlow/start.js',
	'./assets/js/built/gameFlow/timeController.js',
	'./assets/js/built/gameState/gameState.js',
	'./assets/js/built/gameState/gameStateGame.js',
	'./assets/js/built/gameState/gameStateMainMenu.js',
	'./assets/js/built/gameState/gameStatePause.js',
	'./assets/js/built/general/health.js',
	'./assets/js/built/io/ioManager.js',
	'./assets/js/built/io/mouseManager.js',
	'./assets/js/built/io/saveLoadHelper.js',
	'./assets/js/built/math/algebra.js',
	'./assets/js/built/math/collisions.js',
	'./assets/js/built/math/trig.js',
	'./assets/js/built/player/aetherBonusManager.js',
	'./assets/js/built/player/manaBar.js',
	'./assets/js/built/player/playerInventory.js',
	'./assets/js/built/player/playerLevel.js',
	'./assets/js/built/player/reincarnationManager.js',
	'./assets/js/built/player/resourceBar.js',
	'./assets/js/built/player/stageBonusManager.js',
	'./assets/js/built/player/staminaBar.js',
	'./assets/js/built/player/stats/playerStat.js',
	'./assets/js/built/progression/progressionManager.js',
	'./assets/js/built/struct/bigNumber.js',
	'./assets/js/built/struct/bigNumberTests.js',
	'./assets/js/built/struct/circle.js',
	'./assets/js/built/struct/color.js',
	'./assets/js/built/struct/dynamicRectangle.js',
	'./assets/js/built/struct/equation.js',
	'./assets/js/built/struct/equationTests.js',
	'./assets/js/built/struct/globalVariables.js',
	'./assets/js/built/struct/imageDataWrapper.js',
	'./assets/js/built/struct/queue.js',
	'./assets/js/built/struct/rectangle.js',
	'./assets/js/built/struct/variables.js',
	'./assets/js/built/struct/vectors.js',
	'./assets/js/built/struct/levelTracker/levelTracker.js',
	'./assets/js/built/struct/levelTracker/levelTrackerBase.js',
	'./assets/js/built/struct/levelTracker/progressLevelTracker.js',
	'./assets/js/built/struct/levelTracker/progressLevelTracker_Equation_BN.js',
	'./assets/js/built/struct/levelTracker/progressLevelTracker_Sum.js',
	'./assets/js/built/ui/aetherUI.js',
	'./assets/js/built/ui/combatUI.js',
	'./assets/js/built/ui/coreSelectButton.js',
	'./assets/js/built/ui/playerLevelBar.js',
	'./assets/js/built/ui/sideBar.js',
	'./assets/js/built/ui/simpleIconButton.js',
	'./assets/js/built/ui/simpleTextButton.js',
	'./assets/js/built/ui/uiElement.js',
	'./assets/js/built/ui/uiExtensions.js',
	'./assets/js/built/ui/uiStaticMethods.js',
	'./assets/js/built/ui/animations/slideAnimationHorizontal.js',
	'./assets/js/built/ui/uiStates/abilityUIState.js',
	'./assets/js/built/ui/uiStates/assemblersUIState.js',
	'./assets/js/built/ui/uiStates/closeButtonLinkedUIState.js',
	'./assets/js/built/ui/uiStates/closeButtonUIState.js',
	'./assets/js/built/ui/uiStates/coreUIState.js',
	'./assets/js/built/ui/uiStates/gameUIState.js',
	'./assets/js/built/ui/uiStates/inventoryUIState.js',
	'./assets/js/built/ui/uiStates/mainButtonsUIState.js',
	'./assets/js/built/ui/uiStates/mainDisplayUIState.js',
	'./assets/js/built/ui/uiStates/mainMenuUIState.js',
	'./assets/js/built/ui/uiStates/musicUIState.js',
	'./assets/js/built/ui/uiStates/stageUIState.js',
	'./assets/js/built/utilities/actions.js',
	'./assets/js/built/utilities/binaryHelper.js',
	'./assets/js/built/utilities/binaryTests.js',
	'./assets/js/built/utilities/dataStructureExtensions.js',
	'./assets/js/built/utilities/devCheats.js',
	'./assets/js/built/utilities/enum.js',
	'./assets/js/built/utilities/keybindings.js',
	'./assets/js/built/utilities/objectExtensions.js',
	'./assets/js/built/utilities/speedTesting.js',
	'./assets/js/built/utilities/staticUtil.js',
	'./assets/js/built/utilities/stringHelper.js',
	'./assets/textures/textureLoader.js',
	'./assets/textures/textureManifest.js',
	'./assets/textures/levels/ARMOR/monochrome-transparent_32_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_33_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_34_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_35_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_36_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_37_1.png',
	'./assets/textures/levels/ARMOR/monochrome-transparent_38_1.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_24_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_25_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_26_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_27_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_28_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_29_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_30_5.png',
	'./assets/textures/levels/BUGS/monochrome-transparent_31_5.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_32_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_33_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_34_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_35_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_36_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_37_0.png',
	'./assets/textures/levels/HELMETS/monochrome-transparent_38_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_25_6.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_26_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_27_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_27_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_28_2.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_28_3.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_29_1.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV2/monochrome-transparent_30_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_28_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_28_6.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_28_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_29_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_31_4.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV3/monochrome-transparent_31_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_29_9.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_30_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_30_2.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_30_6.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_31_0.png',
	'./assets/textures/levels/MONSTERS_ASSORTED_LV4/monochrome-transparent_31_6.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_25_2.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_25_3.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_26_2.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_26_3.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_27_2.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_27_3.png',
	'./assets/textures/levels/MONSTERS_DEMONS/monochrome-transparent_29_2.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_24_0.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_24_1.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_24_2.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_24_6.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_30_1.png',
	'./assets/textures/levels/MONSTERS_MAGES/monochrome-transparent_31_1.png',
	'./assets/textures/levels/MONSTERS_UNDEAD/monochrome-transparent_26_6.png',
	'./assets/textures/levels/MONSTERS_UNDEAD/monochrome-transparent_27_6.png',
	'./assets/textures/levels/MONSTERS_UNDEAD/monochrome-transparent_27_8.png',
	'./assets/textures/levels/MONSTERS_UNDEAD/monochrome-transparent_29_4.png',
	'./assets/textures/levels/MONSTERS_UNDEAD/monochrome-transparent_29_6.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_25_8.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_26_8.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_28_8.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_29_8.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_30_8.png',
	'./assets/textures/levels/MONSTERS_WILD_CREATURES/monochrome-transparent_31_8.png',
	'./assets/textures/ui/AFKLoadingBalls.png',
	'./assets/textures/ui/AFKLoadingCircle.png',
	'./assets/textures/ui/Arrow.png',
	'./assets/textures/ui/BlockSprite.png',
	'./assets/textures/ui/BlockSprite2.png',
	'./assets/textures/ui/CircleBorderTransparent.png',
	'./assets/textures/ui/Abilities/BasicAttack.png',
	'./assets/textures/ui/Abilities/BasicAttackTarget.png',
	'./assets/textures/ui/Abilities/Focus.png',
	'./assets/textures/ui/Abilities/FocusMoveTarget.png',
	'./assets/textures/ui/Bars/barBack_horizontal.png',
	'./assets/textures/ui/Bars/barBack_horizontal_white.png',
	'./assets/textures/ui/Bars/barBlue_horizontal.png',
	'./assets/textures/ui/Bars/barGray_horizontal.png',
	'./assets/textures/ui/Bars/barGray_horizontal_Mid.png',
	'./assets/textures/ui/Bars/barGray_horizontal_Mid_InsideOnly.png',
	'./assets/textures/ui/Bars/barGray_horizontal_Mid_WithEnds.png',
	'./assets/textures/ui/Bars/barMuscle_horizontal.png',
	'./assets/textures/ui/Bars/barOrange_horizontal.png',
	'./assets/textures/ui/Bars/Carrot.png',
	'./assets/textures/ui/Bars/White_1x1.png',
	'./assets/textures/ui/Cores/CombatCore.png',
	'./assets/textures/ui/Cores/CombatCore1_32x32.png',
	'./assets/textures/ui/Cores/CoreOfCreation.png',
	'./assets/textures/ui/Cores/CoreOfCreation_32x32.png',
	'./assets/textures/ui/Cores/SphereEnergyCore3.png',
	'./assets/textures/ui/Cores/SphereEnergyCore4.png',
	'./assets/textures/ui/Cores/SphereEnergyCore5.png',
	'./assets/textures/ui/Cores/SphereEnergyCore6.png',
	'./assets/textures/ui/Cores/SphereEnergyCore7.png',
	'./assets/textures/ui/Cores/SphereEnergyCore8.png',
	'./assets/textures/ui/Effects/AbilityDamage.png',
	'./assets/textures/ui/Effects/AetherGained.png',
	'./assets/textures/ui/Effects/AetherNodePower.png',
	'./assets/textures/ui/Effects/AttunedAssemblerPower.png',
	'./assets/textures/ui/Effects/BasicAttackCooldown.png',
	'./assets/textures/ui/Effects/BasicAttackCriticalHits.png',
	'./assets/textures/ui/Effects/BasicAttackStaminaCost.png',
	'./assets/textures/ui/Effects/BasicCombatSphere.png',
	'./assets/textures/ui/Effects/BlazingSpheres.png',
	'./assets/textures/ui/Effects/Blueprint.png',
	'./assets/textures/ui/Effects/CombatSphereDamage.png',
	'./assets/textures/ui/Effects/CombatSphereMoveSpeed.png',
	'./assets/textures/ui/Effects/CoreEmpowerment.png',
	'./assets/textures/ui/Effects/CoreEnhancement.png',
	'./assets/textures/ui/Effects/CreationPower.png',
	'./assets/textures/ui/Effects/CreationSpeed.png',
	'./assets/textures/ui/Effects/CritCooldown.png',
	'./assets/textures/ui/Effects/CritDamage.png',
	'./assets/textures/ui/Effects/CritRange.png',
	'./assets/textures/ui/Effects/CritTrample.png',
	'./assets/textures/ui/Effects/LeachingCrit.png',
	'./assets/textures/ui/Effects/LifeSpan.png',
	'./assets/textures/ui/Effects/TalentGained.png',
	'./assets/textures/ui/Effects/Unlock.png',
	'./assets/textures/ui/Enhancements/AbilityDamageT1.png',
	'./assets/textures/ui/Enhancements/AetherMagnificationT1.png',
	'./assets/textures/ui/Enhancements/AetherNodePowerT1.png',
	'./assets/textures/ui/Enhancements/BasicAttackCriticalHits.png',
	'./assets/textures/ui/Enhancements/BasicAttackEfficiencyT1.png',
	'./assets/textures/ui/Enhancements/BasicCombatSpheresT1.png',
	'./assets/textures/ui/Enhancements/BlazingSpheres.png',
	'./assets/textures/ui/Enhancements/CombatSphereDamageT1.png',
	'./assets/textures/ui/Enhancements/CombatSphereMoveSpeedT1.png',
	'./assets/textures/ui/Enhancements/CritCooldownT1.png',
	'./assets/textures/ui/Enhancements/CritDamageT1.png',
	'./assets/textures/ui/Enhancements/CritMasteryT1.png',
	'./assets/textures/ui/Enhancements/CritRangeT1.png',
	'./assets/textures/ui/Enhancements/CritTrample.png',
	'./assets/textures/ui/Enhancements/LeachingCritT1.png',
	'./assets/textures/ui/Enhancements/NodeAssemblerPowerT1.png',
	'./assets/textures/ui/Enhancements/NodeStageAmplifier.png',
	'./assets/textures/ui/Enhancements/TalentStageAmplifier.png',
	'./assets/textures/ui/Icons/AFKBasicAttackIcon.png',
	'./assets/textures/ui/Icons/AutoBasicAttackIcon.png',
	'./assets/textures/ui/Icons/BallIcon.png',
	'./assets/textures/ui/Icons/BasicAttackIcon.png',
	'./assets/textures/ui/Icons/Book.png',
	'./assets/textures/ui/Icons/CheckMarkIcon.png',
	'./assets/textures/ui/Icons/CloseIcon.png',
	'./assets/textures/ui/Icons/CombatIcon.png',
	'./assets/textures/ui/Icons/CraftingIcon.png',
	'./assets/textures/ui/Icons/CreditsIcon.png',
	'./assets/textures/ui/Icons/CritIcon.png',
	'./assets/textures/ui/Icons/FlexedArm.png',
	'./assets/textures/ui/Icons/FocusIcon.png',
	'./assets/textures/ui/Icons/iconCross_beige.png',
	'./assets/textures/ui/Icons/iconCross_blue.png',
	'./assets/textures/ui/Icons/iconCross_brown.png',
	'./assets/textures/ui/Icons/iconCross_grey.png',
	'./assets/textures/ui/Icons/InfoIcon.png',
	'./assets/textures/ui/Icons/InventoryIcon.png',
	'./assets/textures/ui/Icons/LockIcon.png',
	'./assets/textures/ui/Icons/MusicIcon.png',
	'./assets/textures/ui/Icons/NavigationIcon.png',
	'./assets/textures/ui/Icons/NextIcon.png',
	'./assets/textures/ui/Icons/PauseIcon.png',
	'./assets/textures/ui/Icons/Phoenix.png',
	'./assets/textures/ui/Icons/PlayIcon.png',
	'./assets/textures/ui/Icons/PreviousIcon.png',
	'./assets/textures/ui/Icons/SaveIcon.png',
	'./assets/textures/ui/Icons/SettingsIcon.png',
	'./assets/textures/ui/Icons/SideBarHideIcon.png',
	'./assets/textures/ui/Icons/SideBarShowIcon.png',
	'./assets/textures/ui/Icons/StageIcon.png',
	'./assets/textures/ui/Icons/TargetIcon.png',
	'./assets/textures/ui/Icons/TimeIcon.png',
	'./assets/textures/ui/Icons/TimeIcon_22x22.png',
	'./assets/textures/ui/Icons/UpgradeIcon.png',
	'./assets/textures/ui/Items/AetherNode.png',
	'./assets/textures/ui/Items/BalancedAssembler.png',
	'./assets/textures/ui/Items/DefaultIcon.png',
	'./assets/textures/ui/Items/Hydrogen.png',
	'./assets/textures/ui/Items/NodeAssemblerT1.png',
	'./assets/textures/ui/Items/NodeAssemblerT10.png',
	'./assets/textures/ui/Items/NodeAssemblerT2.png',
	'./assets/textures/ui/Items/NodeAssemblerT3.png',
	'./assets/textures/ui/Items/NodeAssemblerT4.png',
	'./assets/textures/ui/Items/NodeAssemblerT5.png',
	'./assets/textures/ui/Items/NodeAssemblerT6.png',
	'./assets/textures/ui/Items/NodeAssemblerT7.png',
	'./assets/textures/ui/Items/NodeAssemblerT8.png',
	'./assets/textures/ui/Items/NodeAssemblerT9.png',
	'./assets/textures/ui/Talents/AetherRefinementT1.png',
	'./assets/textures/ui/Talents/CombatCoreEmpowermentT1.png',
	'./assets/textures/ui/Talents/CombatCoreEnhancementT1.png',
	'./assets/textures/ui/Talents/CombatCoreProwessT1.png',
	'./assets/textures/ui/Talents/CreationCoreEmpowermentT1.png',
	'./assets/textures/ui/Talents/CreationCoreEnhancementT1.png',
	'./assets/textures/ui/Talents/CreationCoreProwessT1.png',
	'./assets/textures/ui/Talents/GiftOfTheGoddess.png',
	'./assets/textures/ui/Talents/NodeAssemblerT1.png',
	'./assets/textures/ui/UI_Panels/buttonRound_blue.png',
	'./assets/textures/ui/UI_Panels/buttonRound_brown.png',
	'./assets/textures/ui/UI_Panels/buttonRound_grey_SymetricalNoShaddow.png',
	'./assets/textures/ui/UI_Panels/buttonRound_grey_SymetricalNoShaddow_Horizontal.png',
	'./assets/textures/ui/UI_Panels/buttonSquare_grey_pressed_NoRips.png',
	'./assets/textures/ui/UI_Panels/buttonSquare_grey_pressed_NoRips_TransparentCenter.png',
	'./assets/textures/ui/UI_Panels/panelInset_beige.png',
	'./assets/textures/ui/UI_Panels/panelInset_beigeLight.png',
	'./assets/textures/ui/UI_Panels/panelInset_beigeLight_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_beigeLight_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_beige_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_beige_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue_dark.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue_dark_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue_dark_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_blue_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_dark.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_dark_100x100.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_dark_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_Orig.png',
	'./assets/textures/ui/UI_Panels/panelInset_brown_Orig_NoRips.png',
	'./assets/textures/ui/UI_Panels/panel_beige.png',
	'./assets/textures/ui/UI_Panels/panel_beigeLight.png',
	'./assets/textures/ui/UI_Panels/panel_beige_Cropped.png',
	'./assets/textures/ui/UI_Panels/panel_blue.png',
	'./assets/textures/ui/UI_Panels/panel_blue_dark.png',
	'./assets/textures/ui/UI_Panels/panel_brown.png',
	'./assets/textures/ui/UI_Panels/panel_brown_dark.png',
	'./assets/textures/ui/UI_Panels/panel_brown_dark_cropped_NoRips.png',
	'./assets/textures/ui/UI_Panels/panel_gray.png'
];//ASSETS End

if (isWorkerContext) {
	self.addEventListener('install', (event) => {
		console.log('[SW] Installing service worker and caching assets…');
		event.waitUntil(
			caches.open(CACHE_NAME).then(cache => {
				return cache.addAll(ASSETS);
			})
		);
		self.skipWaiting();
	});
	
	self.addEventListener('activate', (event) => {
		console.log('[SW] Activating service worker…');
		event.waitUntil(
			caches.keys().then(keys =>
				Promise.all(
					keys.map(key => {
						if (key !== CACHE_NAME) {
							console.log(`[SW] Cache version mismatch: deleting old cache "${key}"`);//TODO: make this an incomming version that's older.
							return caches.delete(key);
						}
					})
				)
			)
		);
		self.clients.claim();
	});
	
	self.addEventListener('fetch', (event) => {
		event.respondWith(
			caches.match(event.request).then(cached => {
				if (zonDebug)
					return fetch(event.request);

				if (cached)
					return cached;

				return fetch(event.request);
			})
		);
	});

	if (zonDebug) {
		console.log('[SW] Debug mode is enabled. Service worker will not use the cache.');
	}
}